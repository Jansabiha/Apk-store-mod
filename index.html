<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mod APK Store</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 15px; }
        .product-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        img { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; }
        h3 { color: #333; margin: 10px 0; }
        p { color: #666; font-size: 14px; }
        .buy-btn { background: #ff9800; color: white; border: none; padding: 12px; width: 100%; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 16px; }
        .payment-box { display: none; background: #fff3e0; padding: 12px; border-radius: 6px; margin-top: 10px; border: 1px dashed #ff9800; }
        .unlock-box { margin-top: 10px; display: none; text-align: center; }
        input { width: 70%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; outline: none; }
        .check-btn { padding: 10px 15px; background: #2196f3; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .payment-info { color: #d32f2f; font-weight: bold; }
    </style>
</head>
<body>

    <h2 style="text-align: center; color: #1a73e8;">Apk & Video Store</h2>
    <div id="productList">অ্যাপ লোড হচ্ছে, অপেক্ষা করুন...</div>

    <script>
        // আপনার সঠিক করা Firebase কনফিগারেশন
        const firebaseConfig = {
            apiKey: "AIzaSyAQUeZLFvbAxJST7mJ4J472UkfH4oP1v0g",
            authDomain: "mod-apk-b94b7.firebaseapp.com",
            databaseURL: "https://mod-apk-b94b7-default-rtdb.firebaseio.com",
            projectId: "mod-apk-b94b7",
            storageBucket: "mod-apk-b94b7.firebasestorage.app",
            messagingSenderId: "19956764478",
            appId: "1:19956764478:web:2e609dc08698ada34a666f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ডাটাবেস থেকে অ্যাপ লিস্ট আনা
        db.ref("products").on("value", (snapshot) => {
            const list = document.getElementById("productList");
            list.innerHTML = "";
            if (!snapshot.exists()) {
                list.innerHTML = "<p style='text-align:center;'>কোনো আইটেম পাওয়া যায়নি।</p>";
                return;
            }
            snapshot.forEach((child) => {
                const data = child.val();
                list.innerHTML += `
                    <div class="product-card">
                        <img src="${data.thumbnail}" onerror="this.src='https://via.placeholder.com/300x150?text=No+Thumbnail'">
                        <h3>${data.name}</h3>
                        <p>${data.description}</p>
                        <button class="buy-btn" onclick="showPayment('${child.key}')">Buy / কিনুন</button>
                        
                        <div id="pay-${child.key}" class="payment-box">
                            <p class="payment-info">পেমেন্ট নম্বরসমূহ:</p>
                            <p><b>বিকাশ:</b> 01790042808</p>
                            <p><b>নগদ:</b> 01320349211</p>
                            <p><b>টেলিগ্ৰাম @online2921919
                            <p style="font-size:12px;">টাকা পাঠিয়ে এডমিন থেকে পাসওয়ার্ড নিন।</p>
                            <button onclick="showUnlock('${child.key}')" style="background:#4caf50; color:white; border:none; padding:5px 10px; border-radius:4px;">পাসওয়ার্ড দিন</button>
                        </div>

                        <div id="unlock-${child.key}" class="unlock-box">
                            <input type="text" id="pass-${child.key}" placeholder="পাসওয়ার্ড লিখুন">
                            <button class="check-btn" onclick="verifyPass('${child.key}', '${data.password}', '${data.link}')">Unlock</button>
                        </div>
                    </div>
                `;
            });
        });

        function showPayment(id) { document.getElementById('pay-'+id).style.display = 'block'; }
        function showUnlock(id) { document.getElementById('unlock-'+id).style.display = 'block'; }
        
        function verifyPass(id, correctPass, link) {
            const inputPass = document.getElementById('pass-'+id).value;
            if(inputPass === correctPass) {
                alert("সঠিক পাসওয়ার্ড! ডাউনলোড শুরু হচ্ছে...");
                window.open(link, '_blank');
            } else {
                alert("ভুল পাসওয়ার্ড! সঠিক পাসওয়ার্ডটি এডমিন থেকে সংগ্রহ করুন।");
            }
        }
    </script>
</body>
</html>